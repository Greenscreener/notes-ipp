# Zkouška

## Pojmy

- Model ve výrokové logice, pravdivostní funkce výroku
	- model jazyka je určité pravdivostní ohodnocení proměnných
	- pravdivostní funkce výroku přiřazuje konkrétnímu ohodnocení proměnných nulu nebo jedničku, definuje se induktivně pomocí binárních funkcí
- Sémantické pojmy (pravdivost, lživost, nezávislost, splnitelnost) v logice, vzhledem k teorii
	- pravdivý výrok platí v každém modelu (jazyka/teorie)
		- je pravdivý v logice = platí v logice = je tautologie
		- je pravdivý v T = platí v T = je důsledek T
	- lživý (sporný) výrok neplatí v žádném modelu
	- nezávislý výrok platí v nějakém modelu a neplatí v jiném modelu
	- splnitelný výrok platí v nějakém modelu (tedy není lživý, je pravdivý nebo nezávislý)
- Ekvivalence výroků resp. výrokových teorií, T-ekvivalence
	- výroky/teorie jsou ekvivalentní, když se rovnají jejich množiny modelů
	- výroky/teorie jsou T-ekvivalentní, když se rovnají jejich množiny modelů vzhledem k teorii T
		- $\varphi\sim_T\psi\equiv M_\mathbb P(T,\varphi)=M_\mathbb P(T,\psi)$
		- kde $M_\mathbb P(T,\varphi)\equiv M_\mathbb P(T\cup\set{\varphi})$, což odpovídá $M_\mathbb P(T)\cap M_\mathbb P(\varphi)$
- Sémantické pojmy o teorii (sporná, bezesporná, kompletní, splnitelná)
	- teorie je sporná, jestliže… (ekvivalentně)
		- v ní platí spor
		- nemá žádný model
		- v ní platí všechny výroky
	- teorie je bezesporná (splnitelná), pokud není sporná, tj. má nějaký model
	- teorie je kompletní, jestliže není sporná a každý výrok je v ní pravdivý nebo lživý (tj. nemá žádné nezávislé výroky), ekvivalentně, pokud má právě jeden model
- Extenze teorie (jednoduchá, konzervativní), odpovídající sémantická kritéria
	- extenze teorie $T$ je libovolná teorie $T'$ v jazyce $\mathbb P'\supseteq\mathbb P$ splňující $\text{Csq}_{\mathbb P}(T)\subseteq\text{Csq}_{\mathbb P'}(T')$
	- extenze je jednoduchá, pokud $\mathbb P'=\mathbb P$
	- extenze je konzervativní, pokud $\text{Csq}_{\mathbb P}(T)=\text{Csq}_{\mathbb P}(T')=\text{Csq}_{\mathbb P'}(T')\cap\text{VF}_\mathbb P$
	- sémantický význam (v řeči modelů)
		- mějme teorii $T$ v jazyce $\mathbb P$ a teorii $T'$ v jazyce $\mathbb P'$, kde $\mathbb P\subseteq\mathbb P'$
		- $T'$ je jednoduchou extenzí $T$, právě když $\mathbb P'=\mathbb P$ a $M_\mathbb P(T')\subseteq M_\mathbb P(T)$
		- $T'$ je extenzí $T$, právě když $M_{\mathbb P'}(T')\subseteq M_{\mathbb P'}(T)$
		- $T'$ je konzervativní extenzí $T$, pokud je extenzí a navíc platí, že každý model $T$ lze nějak expandovat na model $T'$
		- $T'$ je extenzí $T$ a zároveň $T$ je extenzí $T'$, právě když $T'\sim T$ (jazyky a množiny modelů se rovnají)
		- kompletní jednoduché extenze $T$ jednoznačně až na ekvivalenci odpovídají modelům $T$
- Tablo z teorie, tablo důkaz
	- konečné tablo z teorie $T$ je uspořádaný, položkami označkovaný strom zkonstruovaný aplikací konečně mnoha následujících pravidel:
		- jednoprvskový strom označkovaný libovolnou položkou je tablo z teorie $T$
		- pro libovolnou položku $P$ na libovolné větvi $V$ můžeme na konec větve $V$ připojit atomické tablo pro položku $P$
		- na konec libovolné větve můžeme připojit položku $\text T\alpha$ pro libovolný axiom teorie $\alpha\in T$
	- tablo je konečné nebo nekonečné, každopádně vzniklo ve spočetně mnoha krocích
	- tablo pro položku $P$ je tablo s položkou $P$ v kořeni
	- tablo důkaz výroku $\varphi$ z teorie $T$ je sporné tablo z teorie $T$ s  položkou $\text F\varphi$ v kořeni
		- pokud existuje, je $\varphi$ tablo dokazatelný z $T$, píšeme $T\vdash\varphi$
		- podobně definujeme tablo zamítnutí s $\text T\varphi$ v kořeni, tablo zamítnutelnost se značí $T\vdash \neg\varphi$
	- tablo je sporné, pokud je každá jeho větev sporná
	- větev je sporná, pokud obsahuje položky $\text T\psi$ a $\text F\psi$ pro nějaký výrok $\psi$, jinak je bezesporná
	- tablo je dokončené, pokud je každá jeho větev dokončená
	- větev je dokončená…
		- pokud je sporná
		- nebo pokud je každá její položka na této větvi redukovaná a pokud větev zároveň obsahuje položku s T pro každý axiom teorie
	- položka je redukovaná na dané větvi, pokud obsahuje pouze výrokovou proměnnou nebo se na dané větvi vyskytuje jako kořen atomického tabla (tedy došlo k jejímu rozvoji na dané větvi)
- Kanonický model
	- je-li $V$ bezesporná větev dokončeného tabla, potom kanonický model pro $V$ je model definovaný předpisem $v(p) = \begin{cases} 1 &\text{pokud }V\text{ obsahuje T}p \\ 0 &\text{jinak}\end{cases}$
- Kongruence struktury, faktorstruktura, axiomy rovnosti
	- kongruence
		- mějme ekvivalenci $\sim$ na množině $A$, funkci $f:A^n\to A$ a relaci $R\subseteq A^n$
		- říkáme, že $\sim$ je kongruencí pro funkci $f$, pokud pro všechna $x_i,y_i\in A$ taková, že $x_i\sim y_i$ platí $f(x_1,\dots,x_n)\sim f(y_1,\dots,y_n)$
		- říkáme, že $\sim$ je kongruencí pro relaci $R$, pokud pro všechna $x_i,y_i\in A$ taková, že $x_i\sim y_i$ platí $R(x_1,\dots,x_n)$, právě když $R(y_1,\dots,y_n)$
	- kongruence struktury $\mathcal A$ je ekvivalence $\sim$ na množině $A$, která je kongruencí pro všechny funkce a relace $\mathcal A$
	- faktorstruktura
		- mějme strukturu $\mathcal A$ a její kongruenci $\sim$
		- faktorstruktura (podílová struktura) $\mathcal A$ podle $\sim$ je struktura $A/_\sim$ v témž jazyce, jejíž univerzum $A/_\sim$ je množina všech rozkladových tříd $A$ podle $\sim$ a jejíž funkce a relace jsou definované pomocí reprezentantů, tj.:
			- $f^{\mathcal A/_\sim}([x_1]_\sim,\dots,[x_n]_\sim)=[f^\mathcal A(x_1,\dots,x_n)]_\sim$, pro každý $n$-ární funkční symbol $f$
			- $R^{\mathcal A/_\sim}([x_1]_\sim,\dots,[x_n]_\sim)$, právě když $R^\mathcal A(x_1,\dots,x_n)$, pro každý $n$-ární relační symbol $R$
	- axiomy rovnosti pro jazyk $L$ s rovností jsou
		- $x=x$
		- $x_1=y_1\land\dots\land x_n=y_n\to f(x_1,\dots,x_n)=f(y_1,\dots,y_n)$ pro každý $n$-ární funkční symbol $f$ jazyka $L$
		- $x_1=y_1\land\cdots\land x_n=y_n\to \left(R(x_1,\dots,x_n)\to R(y_1,\dots,y_n)\right)$ pro každý $n$-ární relační symbol $R$ jazyka $L$ včetně rovnosti
	- z 1. a 3. axiomu plyne, že relace $=^\mathcal A$ je ekvivalence na $A$ (symetrie a tranzitivita plyne z 3. axiomu)
	- 2. a 3. axiom vyjadřují, že $=^\mathcal A$ je kongruencí $\mathcal A$
- CNF a DNF, Hornův tvar. Množinová reprezentace CNF formule, splňující ohodnocení
	- tvary výroků
		- literál je prvovýrok nebo negace prvovýroku
			- pro literál $\ell$ označuje $\overline\ell$ literál k němu opačný (tedy jeho negaci)
		- klauzule je disjunkce literálů
			- jednotková klauzule je samotný literál
			- prázdná klauzule je $\bot$
		- výrok je v konjunktivní normální formě (CNF), pokud je konjunkcí klauzulí
			- prázdný výrok v CNF je $\top$
		- elementární konjunkce je konjunkce literálů
			- jednotková elementární konjunkce je samotný literál
			- prázdná elementární konjunkce je $\top$
		- výrok je v disjunktivní normální formě (DNF), pokud je disjunkcí elementárních konjunkcí
			- prázdný výrok v DNF je $\bot$
		- výrok je hornovský (v Hornově tvaru), pokud je konjunkcí hornovských klauzulí, tj. klauzulí obsahujících nejvýše jeden pozitivní literál
	- množinová reprezentace
		- klauzule je konečná množina literálů
			- prázdnou klauzuli označíme $\square$, není nikdy splněna
		- CNF formule je (konečná nebo nekonečná) množina klauzulí
			- prázdná formule $\emptyset$ je vždy splněna
	- ohodnocení
		- v množinové reprezentaci odpovídají modely množinám literál, které obsahují pro každou výrokovou proměnnou $p$ právě jeden z literálů $p,\neg p$
		- (částečné) ohodnocení $\mathcal V$ je libovolná množina literálů, která je konzistentní, tj. neobsahuje dvojici opačných literálů
		- ohodnocení je úplné, pokud obsahuje pozitivní nebo negativní literál pro každou výrokovou proměnnou
		- ohodnocení $\mathcal V$ splňuje formuli $S$, píšeme $\mathcal V\models S$, pokud $\mathcal V$ obsahuje nějaký literál z každé klauzule v $S$, tj.: $\forall C\in S:\mathcal V\cap C\neq\emptyset$
		- splňující ohodnocení nemusí být úplné, ale lze jej rozšířit libovolným literálem pro chybějící proměnné
- Rezoluční pravidlo, unifikace, nejobecnější unifikace
	- rezoluční pravidlo
		- mějme klauzule $C_1,C_2$ a literál $\ell$, přičemž $\ell\in C_1$ a $\overline\ell\in C_2$
		- potom rezolventa klauzulí $C_1$ a $C_2$ přes literál $\ell$ je klauzule $C=(C_1\setminus\set{\ell})\cup(C_2\setminus\set{\overline\ell})$
	- unifikace
		- todo
	- nejobecnější unifikace
		- todo
- Rezoluční důkaz a zamítnutí, rezoluční strom
	- rezoluční důkaz (odvození) klauzule $C$ z formule $S$ je konečná posloupnost klauzulí $C_0,C_1,\dots,C_n=C$ taková, že pro každé $i$ je buď $C_i\in S$ nebo $C_i$ je rezolventou nějakých $C_j,C_k$, kde $j\lt i$ a $k\lt i$
	- pokud rezoluční důkaz existuje, říkáme, že $C$ je rezolucí dokazatelná z $S$ a píšeme $S\vdash_R C$
	- rezoluční zamítnutí formule $S$ je rezoluční důkaz $\square$ z $S$, v tom případě je $S$ rezolucí zamítnutelná
	- rezoluční strom klauzule $C$ z formule $S$ je konečný binární strom s vrcholy označenými klauzulemi, kde v kořeni je $C$, v listech jsou klauzule z $S$ a v každém vnitřním vrcholu je rezolventa klauzulí ze synů tohoto vrcholu
- Vysvětlete rozdíl mezi rezolučním důkazem, lineárním důkazem, a LI-důkazem
	- lineární důkaz i LI-důkaz jsou zvláštními případy rezolučního důkazu
	- lineární důkaz vypadá tak, že vždy nějakou centrální klauzuli rezolvujeme s boční klauzulí, čímž vznikne další centrální klauzule
		- centrální klauzule vznikají rezolucí předchozí dvojice klauzulí
		- boční klauzule jsou z $S$ nebo se jedná o minulé centrální klauzule (vzniklé rezolucí)
	- LI-důkaz požaduje, aby všechny boční klauzule byly z $S$
		- LI-rezoluce není úplná pro obecné formule (ne každá nesplnitelná formule má LI-zamítnutí)
		- LI-rezoluce je úplná pro Hornovy formule
- Signatura a jazyk predikátové logiky, struktura daného jazyka
- Atomická formule, formule, sentence, otevřené formule
- Instance formule, substituovatelnost, varianta formule
- Pravdivostní hodnota formule ve struktuře při ohodnocení, platnost formule ve struktuře
- Kompletní teorie v predikátové logice, elementární ekvivalence
- Podstruktura, generovaná podstruktura, expanze a redukt struktury
- Definovatelnost ve struktuře
- Extenze o definice
- Prenexní normální forma, Skolemova varianta
- Izomorfismus struktur, izomorfní spektrum, ω-kategorická teorie
- Axiomatizovatelnost, konečná axiomatizovatelnost, otevřená axiomatizovatelnost
- Rekurzivní axiomatizace, rekurzivní axiomatizovatelnost, rekurzivně spočetná kompletace
- Rozhodnutelná a částečně rozhodnutelná teorie

## Lehké otázky

- Množinu modelů nad konečným jazykem lze axiomatizovat výrokem v CNF, výrokem v DNF
	- tvrzení
		- mějme konečný jazyk $\mathbb P$ a libovolnou množinu modelů $M\subseteq M_\mathbb P$
		- potom existuje výrok $\varphi_\text{DNF}$ v DNF a výrok $\varphi_\text{CNF}$ v CNF takový, že $M=M_\mathbb P(\varphi_\text{DNF})=M_\mathbb P(\varphi_\text{CNF})$
		- konkrétně
			- $\varphi_\text{DNF}=\bigvee_{v\in M}\bigwedge _{p\in\mathbb P} p^{v(p)}$
			- $\varphi_\text{CNF}=\bigwedge_{v\in \overline M}\bigvee_{p\in\mathbb P} \overline{p^{v(p)}}$
	- důkaz
		- pro $\varphi_\text{DNF}$ jednoduché, každá elementární konjunkce popisuje jeden model
			- stejný mechanismus se používá pro důkaz univerzálnosti $\set{\neg,\land,\lor}$
		- výrok $\varphi_\text{CNF}$ je duální k výroku $\varphi'_\text{DNF}$ sestrojenému pro doplněk $M'=\overline M$
			- nebo můžeme dokázat přímo – každá klauzule zakazuje právě jeden nemodel
- 2-SAT, Algoritmus implikačního grafu, jeho korektnost
	- výrok $\varphi$ je v $k$-CNF, pokud je v CNF a každá klauzule má nejvýše $k$ literálů
	- $k$-SAT se ptá, zda je formule v $k$-CNF splnitelná
	- algoritmus implikačního grafu pro 2-SAT
		- klauzuli $a\lor b$ vyjádříme jako dvě implikace $\overline a\to b,\;\overline b\to a$
		- jednotkovou klauzuli $c$ zapíšeme jako $\overline c\to c$
		- implikační graf $\mathcal G_\varphi$ je orientovaný graf, jehož vrcholy jsou všechny literály a hrany jsou dané implikacemi (viz výše)
		- v grafu najdeme komponenty silné souvislosti
			- všechny literály v jedné komponentě musí být ohodnoceny stejně
		- provedeme kontrakci komponent, dostaneme orientovaný acyklický graf $\mathcal G^*_\varphi$
			- postupujeme podle topologického uspořádání, vezmeme nejlevější neohodnocenou komponentu, ohodnotíme ji 0, opačnou komponentu ohodnotíme 1
	- algoritmus běží v lineárním čase, protože komponenty silné souvislosti i topologické uspořádání lze nalézt v čase $O(n+m)$
	- korektnost plyne z tvrzení, že *výrok je splnitelný, právě když žádná komponenta silné souvislosti neobsahuje dvojici opačných literálů*
		- implikaci $\implies$ lze nahlédnout obměnou
			- kdyby komponenta obsahovala dvojici opačných literálů, existovala by implikace $1\to 0$
		- opačná implikace
			- model jsme získali postupem uvedeným výše (pomocí topologického uspořádání grafu komponent)
			- kdyby v tomto modelu původní výrok neplatil, neplatila by některá z klauzulí
			- u jednotkových klauzulí máme hranu $\overline c\to c$ (stejná hrana je i na úrovni grafu komponent), tudíž jsme nutně ohodnotili $\overline c$ dříve než $c$, tedy $c=1$
			- u 2-klauzulí máme dvě hrany a čtyři různé literály, dvě různé proměnné – jednu z nich jsme ohodnotili jako první, ta zaručí platnost klauzule
			- tedy všechny klauzule platí
- Horn-SAT, Algoritmus jednotkové propagace, jeho korektnost
	- výrok je hornovský, pokud je konjunkcí hornovských klauzulí, tj. klauzulí obsahujících nejvýše jeden pozitivní literál
	- algoritmus
		- pokud $\varphi$ obsahuje dvojici opačných jednotkových klauzulí, není splnitelný
		- pokud $\varphi$ neobsahuje žádnou jednotkovou klauzuli, je splnitelný, ohodnotíme všechny zbývající proměnné nulou
		- pokud $\varphi$ obsahuje jednotkovou klauzuli $\ell$, ohodnotíme literál $\ell$ hodhotou 1, provedeme jednotkovou propagaci a postup opakujeme
	- jednotková propagace pro $\ell=1$
		- každou klauzuli obsahující $\ell$ odstraníme (protože je takto splněna)
		- $\overline\ell$ odstraníme ze všech klauzulí, které ho obsahují (protože $\overline\ell$ nemůže zajistit splnění dané klauzule)
	- korektnost
		- korektnost jednotkové propagace je popsána výše
		- ohodnocení zbývajících proměnných nulou je zjevně korektní, neboť každá hornovská „nejednotková“ klauzule obsahuje negativní literál, který tak zajistí splnění klauzule
	- Horn-SAT lze řešit v lineárním čase
		- kvadratický horní odhad lze nahlédnout tak, že v každém kroku výrok procházíme jednou a jednotková propagace ho vždy zkrátí
- Algoritmus DPLL pro řešení SAT
	- literál $\ell$ má čistý výskyt ve $\varphi$, pokud se $\ell$ vyskytuje ve $\varphi$ a opačný literál $\overline\ell$ se ve $\varphi$ nevyskytuje
		- takový literál můžu nastavit na 1
		- to neovlivní splnitelnost výroku, ale zmenší to množinu modelů, které jsem schopen nalézt
	- algoritmus
		- dokud $\varphi$ obsahuje jednotkovou klauzuli $\ell$, ohodnoť $\ell=1$ a proveď jednotkovou propagaci
		- dokud existuje literál $\ell$, který má ve $\varphi$ čistý výskyt, ohodnoť $\ell=1$ a odstraň klauzule obsahující $\ell$
		- pokud $\varphi$ neobsahuje žádnou klauzuli, je splnitelný
		- pokud $\varphi$ obsahuje prázdnout klauzuli, není splnitelný
		- jinak zvol dosud neohodnocenou výrokovou proměnnou $p$ a zavolej algoritmus rekurzivně na $\varphi\land p$ a na $\varphi\land\neg p$
	- algoritmus běží v exponenciálním čase
- Věta o konstantách
- Vlastnosti extenze o definice
- Vztah definovatelných množin a automorfismů
- Tablo metoda v jazyce s rovností
- Věta o kompaktnosti a její aplikace
- Věta o korektnosti rezoluce ve výrokové logice
- Věta o korektnosti rezoluce v predikátové logice
- Souvislost stromu dosazení a splnitelnosti CNF formule
- Nestandardní model přirozených čísel
- Kompletní jednoduché extenze DeLO*
- Existence spočetného algebraicky uzavřeného tělesa
- Tělesa charakteristiky 0 nejsou konečně axiomatizovatelná
- Kritérium otevřené axiomatizovatelnosti
- Rekurzivně axiomatizovaná teorie je částečně rozhodnutelná, kompletní je rozhodnutelná
- Teorie konečné struktury v konečném jazyce s rovností je rozhodnutelná
- Gödelovy věty o neúplnosti a jejich důsledky (bez důkazů)

## Těžké otázky

- Věta o korektnosti tablo metody ve výrokové logice
	- potřebujeme lemma: shoduje-li se model teorie $T$ s položkou v kořeni tabla z teorie $T$, potom se shoduje s nějakou větví
	- důkaz lemmatu
		- mějme postup vytváření tabla
		- indukcí sestrojíme větev, se kterou se model shoduje
		- díváme se na rozdíl mezi dvěma verzemi tabla
			- pokud nová verze vznikla bez prodloužení naší větve, necháme ji tak
			- pokud nová verze vznikla připojením axiomu z teorie na konec naší větve, prodloužíme o něj naši větev
				- model se s axiomem nutně shoduje
			- pokud nová verze vznikla připojením atomického tabla na konec naší větve…
				- model se nutně shoduje s kořenem atomického tabla
				- model se tedy shoduje i s některou z větví atomického tabla
				- naši větev prodloužíme o tuto větev
	- věta o korektnosti: je-li výrok $\varphi$ tablo dokazatelný z teorie $T$, potom je $\varphi$ pravdivý v $T$, tj. $T\vdash\varphi\implies T\vDash\varphi$
	- důkaz sporem
		- nechť $\varphi$ v $T$ neplatí, tj. existuje protipříklad = model $v$, v němž $\varphi$ neplatí
		- výrok $\varphi$ je dokazatelný z $T$, tedy existuje tablo důkaz (sporné tablo s $\text F\varphi$ v kořeni)
		- model $v$ se shoduje s $\text F\varphi$, tedy podle lemmatu se shoduje s nějakou větví $V$
		- všechny větve jsou sporné, tedy i $V$
			- $V$ obsahuje $\text T\psi$ a $\text F\psi$
		- model $v$ se s těmito položkami shoduje
		- proto $v\vDash\psi$ a $v\nvDash\psi$, což je spor
- Věta o korektnosti tablo metody v predikátové logice
- Věta o úplnosti tablo metody ve výrokové logice
- Věta o úplnosti tablo metody v predikátové logice
- Věta o konečnosti sporu, důsledky o konečnosti a systematičnosti důkazů
- Věta o úplnosti rezoluce ve výrokové logice
- Věta o úplnosti LI-rezoluce pro výrokové Hornovy formule
- Věta o úplnosti rezoluce v predikátové logice (Lifting lemma stačí vyslovit)
- Skolemova věta
- Herbrandova věta
- Löwenheim-Skolemova věta včetně varianty s rovností, jejich důsledky
- Vztah izomorfismu a elementární ekvivalence
- ω-kategorické kritérium kompletnosti
- Neaxiomatizovatelnost konečných modelů
- Věta o konečné axiomatizovatelnosti
- Rekurzivně axiomatizovaná teorie s rekurzivně spočetnou kompletací je rozhodnutelná
- Nerozhodnutelnost predikátové logiky
